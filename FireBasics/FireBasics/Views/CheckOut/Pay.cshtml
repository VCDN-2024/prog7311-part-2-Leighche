@model IEnumerable<FireBasics.Models.Product>

@{
    ViewData["Title"] = "Secure Pay";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center mt-5">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body text-center">
                        <h2 class="mb-4">BB Secure Payment</h2>
                        <img src="https://miro.medium.com/v2/resize:fit:600/1*d_vsmFIvCcHcfvrawxzsPg.gif" class="img-fluid mb-4" alt="payment animation">
                        <form id="mockPaymentForm">
                            <div class="form-group">
                                <input type="text" class="form-control" id="cardNumber" placeholder="Card Number" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="cvv" placeholder="CVV" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="expireDate" placeholder="Expiration Date (MM/YY)" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="cardOwnerName" placeholder="Card Owner Name" required>
                            </div>
                            <br />
                            <button type="button" class="btn btn-success btn-block" onclick="mockPayment()">Pay</button>
                        </form>
                    </div>
                </div>
                <div id="thankYouMessage" class="card mt-3" style="display: none;">
                    <div class="card-body text-center">
                        <h3>Thank you for your purchase!</h3>
                        <p>Your payment was successful, and your cart has been cleared.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script>

        function mockPayment() {
            // Validate fields
            var cardNumber = $('#cardNumber').val();
            var cvv = $('#cvv').val();
            var expireDate = $('#expireDate').val();
            var cardOwnerName = $('#cardOwnerName').val();

            if (!cardNumber || !cvv || !expireDate || !cardOwnerName) {
                // Show an error message next to each empty field
                if (!cardNumber) {
                    $('#cardNumber').next('.error-message').remove();
                    $('#cardNumber').after('<div class="error-message">Card Number is required</div>');
                }

                if (!cvv) {
                    $('#cvv').next('.error-message').remove();
                    $('#cvv').after('<div class="error-message">CVV is required</div>');
                }

                if (!expireDate) {
                    $('#expireDate').next('.error-message').remove();
                    $('#expireDate').after('<div class="error-message">Expiration Date is required</div>');
                }

                if (!cardOwnerName) {
                    $('#cardOwnerName').next('.error-message').remove();
                    $('#cardOwnerName').after('<div class="error-message">Card Owner Name is required</div>');
                }

                return;
            }

            // Remove any existing error messages
            $('.error-message').remove();

            // Disable the button to prevent multiple clicks during processing
            $('button').prop('disabled', true);

            // Simulate a delay to mimic payment processing
            setTimeout(function () {
                // Display thank you message
                $('#mockPaymentForm').hide();
                $('#thankYouMessage').show();

                // Clear the cart (replace this with your actual cart clearing logic)
                $('.cart-container').empty();

                // Redirect after 5 seconds
                setTimeout(function () {
                    window.location.href = '/Product/Index';
                }, 5000);
            }, 2000); // 2 seconds delay for demonstration
        }
    </script>
</body>
</html>

<style>
    body {
        background-color: #f8f9fa;
    }

    .card {
        border: none;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .card-body {
        padding: 40px;
    }

    .img-fluid {
        max-width: 100%;
        height: auto;
    }

    .btn-success {
        width: 300px; 
    }

</style>